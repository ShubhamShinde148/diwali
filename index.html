<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diwali</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        
        /* Custom font and base styling */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow: hidden; /* Hide scrollbars */
            background-image: url('Gemini_Generated_Image_ykhxb3ykhxb3ykhx.png'); /* Your background image */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
h1{

color: chartreuse;

}

        canvas {
            display: block; /* Remove default inline spacing */
            position: fixed;
            top: 0;
            left: 0;
            /* The canvas is now transparent, so z-index is less critical but kept for structure */
        }
        /* Style for the overlay text */
        #toran-left, #toran-right {
            font-size: 2rem;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
        .overlay-text {
            text-shadow: 0px 0px 10px rgba(255, 255, 255, 0.5);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Decorative Toran Images -->
    <div id="toran-left" class="absolute top-0 left-0 z-10"></div>
    <div id="toran-right" class="absolute top-0 right-0 z-10"></div>

    <canvas id="fireworksCanvas"></canvas>

    <!-- Overlay content -->
    <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
        <h1 class="text-5xl md:text-7xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500">
            In Advance
        </h1>
    </div>

    <audio id="bgAudio" src="dip.mp3" loop></audio>
<div class="absolute top-4 right-4 z-10">
    <button id="audioBtn" class="bg-green-700 text-white px-4 py-2 rounded shadow">
        Play Sound
    </button>
</div>

<!-- Diwali Greeting Card Section -->
<div id="greetingCard" class="absolute left-4 bottom-4 bg-white rounded-lg shadow-lg p-6 flex flex-col items-center z-20" style="width:300px;">
    <h2 class="text-2xl font-bold mb-2" style="color: orange;">‡§¶‡§ø‡§µ‡§æ‡§≥‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡•á‡§ö‡•ç‡§õ‡§æ!</h2>
    <p class="mb-4 text-center" style="color: #8B4513;">
        ‡§Ø‡§æ ‡§¶‡§ø‡§µ‡§æ‡§≥‡•Ä, ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ò‡§∞‡§æ‡§§ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂, ‡§Ü‡§®‡§Ç‡§¶ ‡§Ü‡§£‡§ø ‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß‡•Ä ‡§≠‡§∞‡•Ç‡§® ‡§∞‡§æ‡§π‡•ã.<br>
        ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡•Ä ‡§Æ‡§æ‡§§‡•á‡§ö‡•Ä ‡§ï‡•É‡§™‡§æ ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§∏‡§¶‡•à‡§µ ‡§∞‡§æ‡§π‡•ã.<br>
        <span style="color: cornflowerblue;">- ‡§∂‡•Å‡§≠‡§Æ ‡§∂‡§ø‡§Ç‡§¶‡•áüíï</span>
    </p>
    <button id="downloadCardBtn" class="bg-green-700 text-white px-4 py-2 rounded shadow">Download Card</button>
</div>

    <script>
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');

        // Set initial canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // --- Configuration ---
        const GRAVITY = 0.02;
        const FRICTION = 0.99;
        const PARTICLE_COUNT = 100; // Particles per explosion
        const AUTO_LAUNCH_INTERVAL = 2000; // Launch a firework every 2 seconds

        let fireworks = [];
        let particles = [];

        // --- Classes ---

        // The main firework rocket that flies up
        class Firework {
            constructor(startX, startY, targetX, targetY) {
                this.x = startX;
                this.y = startY;
                this.startX = startX;
                this.startY = startY;
                this.targetX = targetX;
                this.targetY = targetY;
                
                // Calculate distance and angle
                const distanceToTarget = Math.sqrt((targetX - startX) ** 2 + (targetY - startY) ** 2);
                const angle = Math.atan2(targetY - startY, targetX - startX);

                // Trail particles
                this.trail = [];
                this.hue = Math.random() * 360; // Random color for the explosion
                
                // Speed is constant
                this.speed = 2;
                this.acceleration = 1.05 // Increased from 2 to 4
                this.acceleration = 1.05;
                this.brightness = Math.random() * 20 + 50;
                
                // Calculate velocity based on angle
                this.velocityX = Math.cos(angle) * this.speed;
                this.velocityY = Math.sin(angle) * this.speed;
            }

            update() {
                // Remove old trail particles
                this.trail.push(new Particle(this.x, this.y, this.hue, this.brightness, 3));
                if(this.trail.length > 5) {
                    this.trail.shift();
                }

                // Increase speed over time
                this.speed *= this.acceleration;
                this.x += this.velocityX;
                this.y += this.velocityY;

                const distanceTraveled = Math.sqrt((this.x - this.startX) ** 2 + (this.y - this.startY) ** 2);
                const distanceToTarget = Math.sqrt((this.targetX - this.startX) ** 2 + (this.targetY - this.startY) ** 2);

                // If the firework has reached its destination, explode
                if (distanceTraveled >= distanceToTarget) {
                    this.explode();
                    return true; // Mark for removal
                }
                return false;
            }

            draw() {
                ctx.beginPath();
                ctx.moveTo(this.trail[this.trail.length - 1]?.x || this.x, this.trail[this.trail.length - 1]?.y || this.y);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = `hsl(${this.hue}, 100%, ${this.brightness}%)`;
                ctx.stroke();

                // Draw trail
                this.trail.forEach(p => p.draw());
            }

            explode() {
                // Create a burst of particles
                for (let i = 0; i < PARTICLE_COUNT; i++) {
                    const angle = Math.random() * Math.PI * 2; // Random direction
                    const speed = Math.random() * 8 + 2; // Increased speed for a larger explosion
                    const velocityX = Math.cos(angle) * speed;
                    const velocityY = Math.sin(angle) * speed;
                    particles.push(new Particle(this.x, this.y, this.hue, this.brightness, Math.random() * 3 + 2, velocityX, velocityY)); // Increased particle size
                }
            }
        }

        // The small particles created after an explosion
        class Particle {
            constructor(x, y, hue, brightness, size, velocityX = 0, velocityY = 0) {
                this.x = x;
                this.y = y;
                this.hue = hue;
                this.brightness = brightness;
                this.size = size;
                this.velocityX = velocityX;
                this.velocityY = velocityY;
                this.alpha = 1; // Opacity
            }

            update() {
                this.velocityX *= FRICTION;
                this.velocityY *= FRICTION;
                this.velocityY += GRAVITY;
                this.x += this.velocityX;
                this.y += this.velocityY;
                this.alpha -= 0.015; // Fade out

                return this.alpha <= 0; // Mark for removal if faded
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = Math.max(0, this.alpha);
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false);
                ctx.fillStyle = `hsl(${this.hue}, 100%, ${this.brightness}%)`;
                ctx.fill();
                ctx.restore();
            }
        }

        // Draw a diya (lamp) with animated flame
function drawDiya(x, y, scale = 1) {
    // Diya base
    ctx.save();
    ctx.translate(x, y);
    ctx.scale(scale, scale);

    // Base (brown arc)
    ctx.beginPath();
    ctx.arc(0, 0, 40, Math.PI * 0.15, Math.PI * 0.85, false);
    ctx.lineTo(-35, 10);
    ctx.quadraticCurveTo(0, 30, 35, 10);
    ctx.closePath();
    ctx.fillStyle = '#8B4513';
    ctx.shadowColor = '#FFD700';
    ctx.shadowBlur = 10;
    ctx.fill();

    // Flame (animated)
    const flameY = -35 - Math.sin(Date.now() / 200) * 5;
    ctx.beginPath();
    ctx.ellipse(0, flameY, 10, 18, 0, 0, Math.PI * 2);
    ctx.fillStyle = 'orange';
    ctx.shadowColor = 'yellow';
    ctx.shadowBlur = 20;
    ctx.fill();

    // Inner flame
    ctx.beginPath();
    ctx.ellipse(0, flameY, 5, 10, 0, 0, Math.PI * 2);
    ctx.fillStyle = 'yellow';
    ctx.shadowBlur = 10;
    ctx.fill();

    ctx.restore();
}

// --- Main Loop ---
        function animate() {
            requestAnimationFrame(animate);

            // Clear the canvas completely instead of drawing a black rectangle.
            // This makes the canvas transparent, allowing the CSS background to show through.
            // The particle's own fade-out property will create the trail effect.
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update and draw fireworks
            for (let i = fireworks.length - 1; i >= 0; i--) {
                fireworks[i].draw();
                if (fireworks[i].update()) {
                    fireworks.splice(i, 1); // Remove if exploded
                }
            }

            // Update and draw particles
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].draw();
                if (particles[i].update()) {
                    particles.splice(i, 1); // Remove if faded
                }
            }

            // Draw a row of diyas at the bottom
            const diyaCount = 5;
            const diyaSpacing = canvas.width / (diyaCount + 1);
            for (let i = 0; i < diyaCount; i++) {
                drawDiya(diyaSpacing * (i + 1), canvas.height - 60, 0.8);
            }
        }
        
        // --- Event Listeners and Launchers ---

        function launchFirework(targetX, targetY) {
            const startX = canvas.width / 2;
            const startY = canvas.height;
            fireworks.push(new Firework(startX, startY, targetX, targetY));
        }

        function launchRandomFirework() {
            const targetX = Math.random() * canvas.width;
            const targetY = Math.random() * (canvas.height / 2); // Explode in the top half
            launchFirework(targetX, targetY);
        }

        // Launch on click
        window.addEventListener('click', (e) => {
            launchFirework(e.clientX, e.clientY);
        });
        
        // --- Mouse Trail Effect ---
        let mouseTrailHue = 0;
        const MOUSE_TRAIL_PARTICLE_COUNT = 2; // Number of particles to create on move

        window.addEventListener('mousemove', (e) => {
            for (let i = 0; i < MOUSE_TRAIL_PARTICLE_COUNT; i++) {
                const speed = Math.random() * 1.5;
                const angle = Math.random() * Math.PI * 2;
                const velocityX = Math.cos(angle) * speed;
                const velocityY = Math.sin(angle) * speed;

                // Add a new particle at the cursor's position
                particles.push(new Particle(
                    e.clientX,
                    e.clientY,
                    mouseTrailHue, // Use the cycling hue for RGB effect
                    Math.random() * 20 + 50, // Random brightness
                    Math.random() * 2 + 1 // Random size
                ));
            }
            // Increment the hue to change the color for the next movement
            mouseTrailHue = (mouseTrailHue + 3) % 360;
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // --- Start ---
        
        // Launch the animation loop
        animate();

        // Start automatic fireworks
        setInterval(launchRandomFirework, AUTO_LAUNCH_INTERVAL);
        
        // Launch one immediately for a nice start
        setTimeout(launchRandomFirework, 500);

        const audio = document.getElementById('bgAudio');
    const audioBtn = document.getElementById('audioBtn');
    let isPlaying = false;

    audioBtn.addEventListener('click', () => {
        if (!isPlaying) {
            audio.play();
            audioBtn.textContent = 'Pause Sound';
        } else {
            audio.pause();
            audioBtn.textContent = 'Play Sound';
        }
        isPlaying = !isPlaying;
    });

    audio.addEventListener('error', () => {
        alert('Audio file could not be loaded. Check the file path.');
    });

    document.getElementById('downloadCardBtn').addEventListener('click', function() {
    // Create a temporary canvas for the card
    const cardCanvas = document.createElement('canvas');
    cardCanvas.width = 600;
    cardCanvas.height = 400;
    const ctx = cardCanvas.getContext('2d');

    // Background
    ctx.fillStyle = '#fffbe6';
    ctx.fillRect(0, 0, cardCanvas.width, cardCanvas.height);

    // Diya
    ctx.save();
    ctx.translate(300, 320);
    ctx.scale(1.5, 1.5);
    // Base
    ctx.beginPath();
    ctx.arc(0, 0, 40, Math.PI * 0.15, Math.PI * 0.85, false);
    ctx.lineTo(-35, 10);
    ctx.quadraticCurveTo(0, 30, 35, 10);
    ctx.closePath();
    ctx.fillStyle = '#8B4513';
    ctx.shadowColor = '#FFD700';
    ctx.shadowBlur = 10;
    ctx.fill();
    // Flame
    ctx.beginPath();
    ctx.ellipse(0, -35, 10, 18, 0, 0, Math.PI * 2);
    ctx.fillStyle = 'orange';
    ctx.shadowColor = 'yellow';
    ctx.shadowBlur = 20;
    ctx.fill();
    ctx.beginPath();
    ctx.ellipse(0, -35, 5, 10, 0, 0, Math.PI * 2);
    ctx.fillStyle = 'yellow';
    ctx.shadowBlur = 10;
    ctx.fill();
    ctx.restore();

    // Greeting text (Marathi)
    ctx.font = 'bold 36px Inter, sans-serif';
    ctx.fillStyle = 'orange';
    ctx.textAlign = 'center';
    ctx.fillText('‡§¶‡§ø‡§µ‡§æ‡§≥‡•Ä‡§ö‡•ç‡§Ø‡§æ ‡§π‡§æ‡§∞‡•ç‡§¶‡§ø‡§ï ‡§∂‡•Å‡§≠‡•á‡§ö‡•ç‡§õ‡§æ!', 300, 70);

    ctx.font = '22px Inter, sans-serif';
    ctx.fillStyle = '#8B4513';
    ctx.fillText('‡§Ø‡§æ ‡§¶‡§ø‡§µ‡§æ‡§≥‡•Ä, ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ ‡§ò‡§∞‡§æ‡§§ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∂,', 300, 120);
    ctx.fillText('‡§Ü‡§®‡§Ç‡§¶ ‡§Ü‡§£‡§ø ‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß‡•Ä ‡§≠‡§∞‡•Ç‡§® ‡§∞‡§æ‡§π‡•ã.', 300, 150);
    ctx.fillText('‡§≤‡§ï‡•ç‡§∑‡•ç‡§Æ‡•Ä ‡§Æ‡§æ‡§§‡•á‡§ö‡•Ä ‡§ï‡•É‡§™‡§æ ‡§Ü‡§™‡§≤‡•ç‡§Ø‡§æ‡§µ‡§∞ ‡§∏‡§¶‡•à‡§µ ‡§∞‡§æ‡§π‡•ã.', 300, 180);

    ctx.font = 'italic 20px Inter, sans-serif';
    ctx.fillStyle = 'cornflowerblue';
    ctx.fillText('- ‡§∂‡•Å‡§≠‡§Æ ‡§∂‡§ø‡§Ç‡§¶‡•á‚ù§Ô∏è', 300, 230);

    // Download
    const link = document.createElement('a');
    link.download = 'diwali_greeting_card.png';
    link.href = cardCanvas.toDataURL('image/png');
    link.click();
});

        const toranLeft = document.getElementById('toran-left');
        const toranRight = document.getElementById('toran-right');
        const toranEmoji = 'üèµÔ∏è';
        const toranLength = 10;

        for (let i = 0; i < toranLength; i++) {
            toranLeft.innerHTML += toranEmoji;
            toranRight.innerHTML += toranEmoji;
        }
    </script>
</body>
</html>

